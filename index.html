<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Omori Perfume — French Quality</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container">
            <div class="top-bar-content">
                <div class="contact-info">
                    <span class="phone">+7 747 706-08-22</span>
                    <span class="email">contact@omori-perfume.com</span>
                    <div class="city-selector">
                        <i class="fas fa-map-marker-alt"></i>
                        <span id="currentCity">Алматы</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                <div class="social-links">
                    <a href="https://www.instagram.com/omoriperfume?igsh=NTc4MTIwNjQ2YQ==" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
                    <a href="https://wa.me/77052847822" target="_blank" rel="noopener noreferrer"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="nav-container">
                <!-- Logo -->
                <div class="nav-logo">
                    <div class="logo-mark">
                        <div class="logo-embed">
                            <iframe
                                loading="lazy"
                                title="Omori Perfume Logo"
                                src="https://www.canva.com/design/DAG5yZML2OA/-4qOc2I2KZwW2wjXCYtNyA/view?embed"
                                allowfullscreen
                                referrerpolicy="no-referrer"
                            ></iframe>
                        </div>
                    </div>
                    <div class="brand-copy">
                        <h1>Omori Perfume</h1>
                        <span class="tagline">French Quality</span>
                    </div>
                </div>

                <!-- Navigation -->
                <nav class="nav-center">
                    <ul class="nav-menu">
                        <li><a href="index.html" class="nav-link">Главная</a></li>
                        <li class="nav-item dropdown">
                            <a href="#catalog" class="nav-link">Каталог <i class="fas fa-chevron-down"></i></a>
                            <div class="dropdown-menu">
                                <a href="#catalog">Все ароматы</a>
                            </div>
                        </li>
                        <li><a href="#brands" class="nav-link">Бренды</a></li>
                        <li><a href="#reviews" class="nav-link">Отзывы</a></li>
                        <li><a href="about.html" class="nav-link">О компании</a></li>
                        <li><a href="register.html" class="nav-link nav-link-highlight">Регистрация</a></li>
                    </ul>
                </nav>

                <!-- Search and Icons -->
                <div class="nav-right">
                    <div class="search-box">
                        <input type="text" placeholder="Поиск ароматов...">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="nav-icons">
                        <div class="icon-wrapper" id="wishlistIcon">
                            <i class="fas fa-heart"></i>
                            <span class="badge">0</span>
                        </div>
                        <div class="icon-wrapper" id="cartIcon">
                            <i class="fas fa-shopping-bag"></i>
                            <span class="badge">0</span>
                        </div>
                        <div class="icon-wrapper" id="userIcon">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                </div>

                <!-- Mobile Menu -->
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- About Section -->
        <section id="about" class="about-section">
            <div class="container">
                <div class="about-layout">
                    <div class="about-text">
                        <h2>Omori Perfume в Асыл Арман</h2>
                        <p>Уютный бутик парфюмерии в ЖК «Асыл Арман» (с. Иргели), рейтинг 5.0 по отзывам в 2ГИС <span class="about-source">(см. <a href="https://go.2gis.com/kjFYx" target="_blank" rel="noopener noreferrer">2ГИС</a>).</span></p>
                        <p><strong>Режим работы:</strong> ежедневно с 10:00 до 22:00.</p>
                        <p><strong>Что мы предлагаем:</strong> качественные французские духи и парфюмерные композиции, подбор аромата под ваш вкус.</p>
                    </div>
                    <div class="about-card">
                        <div class="about-card-header">
                            <span class="about-status-dot"></span>
                            <span class="about-status-text">Сегодня открыто · 10:00–22:00</span>
                        </div>
                        <div class="about-card-body">
                            <div class="about-row">
                                <span class="about-label">Адрес</span>
                                <span class="about-value">ЖК «Асыл Арман», ул. Асыл Арман, 7, 1 этаж</span>
                            </div>
                            <div class="about-row">
                                <span class="about-label">Формат</span>
                                <span class="about-value">Бутик парфюмерии</span>
                            </div>
                            <div class="about-row">
                                <span class="about-label">Рейтинг</span>
                                <span class="about-value">5.0 · по данным <a href="https://go.2gis.com/kjFYx" target="_blank" rel="noopener noreferrer">2ГИС</a></span>
                            </div>
                            <div class="about-row">
                                <span class="about-label">Телефон</span>
                                <span class="about-value">+7 705 284‑78‑22</span>
                            </div>
                            <div class="about-row">
                                <span class="about-label">Мы в сети</span>
                                <span class="about-value">Instagram и WhatsApp для быстрых заказов и консультаций</span>
                            </div>
                        </div>
                        <a href="https://go.2gis.com/kjFYx" target="_blank" rel="noopener noreferrer" class="about-map-link">
                            Открыть бутик в 2ГИС
                        </a>
                    </div>
                    <div class="about-cta">
                        <button type="button" class="btn btn-outline about-open-catalog" id="openCatalogFromAbout">Открыть каталог</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Catalog Section -->
        <section id="catalog" class="catalog-section catalog-collapsed">
            <div class="container">
                <div class="catalog-toolbar">
                    <div class="catalog-heading">
                        <h2>Каталог</h2>
                        <span class="catalog-count" id="catalogCount">0 товаров</span>
                    </div>
                    <div class="catalog-controls">
                        <div class="catalog-tabs" id="catalogTabs">
                            <button class="tab active" data-category="all">Все</button>
                            <button class="tab" data-category="women">Женская</button>
                            <button class="tab" data-category="men">Мужская</button>
                            <button class="tab" data-category="unisex">Унисекс</button>
                        </div>
                        <div class="catalog-search-sort">
                            <div class="catalog-search">
                                <i class="fas fa-search"></i>
                                <input id="catalogSearch" type="text" placeholder="Поиск по каталогу...">
                            </div>
                            <select id="catalogSort" class="catalog-sort">
                                <option value="popular_desc">По популярности (убывание)</option>
                                <option value="popular_asc">По популярности (возрастание)</option>
                                <option value="name_asc">По алфавиту (А–Я)</option>
                                <option value="name_desc">По алфавиту (Я–А)</option>
                                <option value="price_desc">По цене (убывание)</option>
                                <option value="price_asc">По цене (возрастание)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div id="catalogGrid" class="products-grid"></div>
                <div class="catalog-actions">
                    <button id="showMoreBtn" class="btn btn-outline">Показать ещё</button>
                </div>
            </div>
        </section>
        
        <!-- Reviews Section -->
        <section id="reviews" class="reviews-section">
            <div class="container">
                <div class="reviews-header">
                    <h2>Отзывы наших клиентов</h2>
                    <p>Мы ценим мнение каждого клиента и постоянно работаем над улучшением сервиса</p>
                </div>
                <div id="reviewsGrid" class="reviews-grid"></div>
            </div>
        </section>

        <!-- Brands Section -->
        <section id="brands" class="brands-section">
            <div class="container">
                <div class="brands-content">
                    <div class="brands-intro">
                        <h2>Бренды</h2>
                        <p>Мы подбираем для вас качественные французские духи и парфюмерные композиции, вдохновлённые узнаваемыми мировыми ароматами. Внимательно следим за стойкостью, шлейфом и аккуратной подачей, чтобы вы получали максимум удовольствия от носки
                            
                        </p>
                        <a href="#" class="btn btn-outline">Все бренды</a>
                    </div>
                    <div id="brandsGrid" class="brands-grid">
                        <!-- Бренды будут загружены динамически из каталога -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Auth Modal -->
    <div class="modal" id="authModal" aria-hidden="true">
        <div class="modal-backdrop" data-close="modal"></div>
        <div class="modal-content">
            <button class="modal-close" data-close="modal">×</button>
            <div class="modal-header">
                <h3 id="authTitle">Войти</h3>
            </div>
            <div class="modal-body">
                <form id="loginForm" class="auth-form">
                    <label for="loginEmail">Логин *</label>
                    <input type="email" id="loginEmail" placeholder="Введите email" required>
                    <label for="loginPassword">Пароль *</label>
                    <div class="input-with-eye">
                        <input type="password" id="loginPassword" placeholder="Введите пароль" required>
                        <i class="fas fa-eye" id="toggleLoginPass"></i>
                    </div>
                    <div class="auth-row">
                        <label class="remember"><input type="checkbox" id="rememberMe"> Запомнить меня</label>
                        <a href="#" id="forgotPass" class="link">Забыли пароль?</a>
                    </div>
                    <button type="submit" class="btn btn-outline">Войти</button>
                    <p class="muted">Нет аккаунта? <a href="#" id="goRegister">Зарегистрироваться</a></p>
                </form>
                <form id="registerForm" class="auth-form" hidden>
                    <label for="regName">Имя *</label>
                    <input type="text" id="regName" placeholder="Ваше имя" required>
                    <label for="regEmail">Email *</label>
                    <input type="email" id="regEmail" placeholder="Ваш email" required>
                    <label for="regPassword">Пароль *</label>
                    <input type="password" id="regPassword" placeholder="Придумайте пароль" required>
                    <button type="submit" class="btn btn-outline">Создать аккаунт</button>
                    <p class="muted">Уже есть аккаунт? <a href="#" id="goLogin">Войти</a></p>
                </form>
            </div>
        </div>
    </div>

    <!-- Account Modal -->
    <div class="modal" id="accountModal" aria-hidden="true">
        <div class="modal-backdrop" data-close="modal"></div>
        <div class="modal-content modal-lg">
            <button class="modal-close" data-close="modal">×</button>
            <div class="modal-header">
                <h3>Личный кабинет</h3>
                <button id="logoutBtn" class="btn btn-outline">Выйти</button>
            </div>
            <div class="account-tabs">
                <button class="tab active" data-tab="orders">Заказы</button>
                <button class="tab" data-tab="profile">Профиль</button>
            </div>
            <div class="modal-body">
                <div id="accountDashboard" class="dashboard-grid">
                    <div class="dash-card" data-open-tab="orders"><i class="fas fa-receipt"></i><span>Текущие заказы</span></div>
                    <div class="dash-card" data-open-tab="profile"><i class="fas fa-credit-card"></i><span>Личный счет</span></div>
                    <div class="dash-card" data-open-tab="profile"><i class="fas fa-user"></i><span>Личные данные</span></div>
                    <div class="dash-card" data-open-tab="orders"><i class="fas fa-clock-rotate-left"></i><span>История заказов</span></div>
                    <div class="dash-card" data-open-tab="orders"><i class="fas fa-file-lines"></i><span>Профили заказов</span></div>
                    <div class="dash-card" data-open-tab="orders"><i class="fas fa-cart-shopping"></i><span>Корзина</span></div>
                    <div class="dash-card" data-open-tab="profile"><i class="fas fa-address-book"></i><span>Контакты</span></div>
                    <div class="dash-card" data-open-tab="profile"><i class="fas fa-heart"></i><span>Избранные</span></div>
                </div>
                <div id="tab-orders" class="tab-panel"></div>
                <div id="tab-profile" class="tab-panel" hidden></div>
            </div>
        </div>
    </div>

    <!-- Cart Drawer -->
    <div class="drawer" id="cartDrawer" aria-hidden="true">
        <div class="drawer-backdrop" data-close="drawer"></div>
        <div class="drawer-panel">
            <div class="drawer-header">
                <h3>Корзина</h3>
                <button class="modal-close" data-close="drawer">×</button>
            </div>
            <div id="cartItems" class="drawer-body"></div>
            <div class="drawer-footer">
                <div class="coupon-row">
                    <input type="text" id="couponInput" placeholder="Код купона">
                    <button id="applyCouponBtn" class="btn btn-outline">Применить</button>
                </div>
                <div class="totals">
                    <div><span>Сумма:</span><strong id="subtotal">₸0</strong></div>
                    <div><span>Скидка:</span><strong id="discount">-₸0</strong></div>
                    <div class="total"><span>Итого:</span><strong id="grandTotal">₸0</strong></div>
                </div>
                <button id="checkoutBtn" class="btn btn-outline">Оформить заказ</button>
            </div>
        </div>
    </div>

    <!-- Reviews Import Modal -->
    <div class="modal" id="reviewsImportModal" aria-hidden="true">
        <div class="modal-backdrop" data-close="modal"></div>
        <div class="modal-content modal-lg">
            <button class="modal-close" data-close="modal">×</button>
            <div class="modal-header">
                <h3>Импорт отзывов из 2GIS</h3>
            </div>
            <div class="modal-body">
                <p class="muted" style="margin-bottom:16px">Вставьте отзывы в формате JSON или по одному на строку. Формат: Имя; Рейтинг (1-5); Текст отзыва; Дата (опционально)</p>
                <p class="muted" style="margin-bottom:16px;font-size:12px">Пример: "Анна Иванова; 5; Отличный сервис, быстрая доставка!; 2024-01-15"</p>
                <textarea id="reviewsInput" style="width:100%;min-height:200px;border:1px solid var(--line);border-radius:8px;padding:12px;font-family:monospace;font-size:13px" placeholder='Имя; Рейтинг; Текст отзыва; Дата&#10;Или JSON формат:&#10;[{"name":"Имя","rating":5,"text":"Текст","date":"2024-01-15"}]'></textarea>
                <div style="display:flex;gap:10px;margin-top:12px;justify-content:flex-end">
                    <button id="reviewsImportSubmit" class="btn btn-outline">Импортировать</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Decant Import Modal -->
    <div class="modal" id="decantModal" aria-hidden="true">
        <div class="modal-backdrop" data-close="modal"></div>
        <div class="modal-content modal-lg">
            <button class="modal-close" data-close="modal">×</button>
            <div class="modal-header">
                <h3>Импорт отливантов</h3>
            </div>
            <div class="modal-body">
                <p class="muted">Вставьте список: одна строка = «Название; цена». Пример: «Chanel Coco Mademoiselle; 25000»</p>
                <textarea id="decantInput" style="width:100%;min-height:180px;border:1px solid #e5e7eb;border-radius:8px;padding:12px" placeholder="Название; цена\n...\n"></textarea>
                <div style="display:flex;gap:10px;margin-top:12px;justify-content:flex-end">
                    <button id="decantImportSubmit" class="btn btn-outline">Импортировать</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal" aria-hidden="true">
        <div class="modal-backdrop" data-close="modal"></div>
        <div class="modal-content">
            <button class="modal-close" data-close="modal">×</button>
            <div class="modal-header">
                <h3>Выберите способ оплаты</h3>
            </div>
            <div class="modal-body">
                <div class="payment-methods">
                    <div class="payment-method" data-method="kaspi">
                        <div class="payment-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <div class="payment-info">
                            <div class="payment-name">Kaspi.kz</div>
                            <div class="payment-desc">Оплата через Kaspi QR или приложение</div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <div class="payment-method" data-method="halyk">
                        <div class="payment-icon">
                            <i class="fas fa-university"></i>
                        </div>
                        <div class="payment-info">
                            <div class="payment-name">Halyk Bank</div>
                            <div class="payment-desc">Перевод на карту Halyk Bank</div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <div class="payment-method" data-method="card">
                        <div class="payment-icon">
                            <i class="fas fa-credit-card"></i>
                        </div>
                        <div class="payment-info">
                            <div class="payment-name">Банковская карта</div>
                            <div class="payment-desc">Visa, Mastercard, UnionPay</div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    <div class="payment-method" data-method="cash">
                        <div class="payment-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="payment-info">
                            <div class="payment-name">Наличными</div>
                            <div class="payment-desc">Оплата при получении</div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>
                <div class="payment-summary">
                    <div class="summary-row">
                        <span>Сумма заказа:</span>
                        <strong id="paymentSubtotal">₸0</strong>
                    </div>
                    <div class="summary-row">
                        <span>Скидка:</span>
                        <strong id="paymentDiscount">-₸0</strong>
                    </div>
                    <div class="summary-row total-row">
                        <span>К оплате:</span>
                        <strong id="paymentTotal">₸0</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Import Modal -->
    <div class="modal" id="paymentImportModal" aria-hidden="true">
        <div class="modal-backdrop" data-close="modal"></div>
        <div class="modal-content modal-lg">
            <button class="modal-close" data-close="modal">×</button>
            <div class="modal-header">
                <h3>Импорт платежей Kaspi</h3>
            </div>
            <div class="modal-body">
                <div class="payment-import-section">
                    <div class="payment-import-tabs">
                        <button class="payment-import-tab active" data-tab="manual">Ручной импорт</button>
                        <button class="payment-import-tab" data-tab="api">Через API</button>
                        <button class="payment-import-tab" data-tab="config">Настройки</button>
                    </div>
                    
                    <div class="payment-import-content">
                        <!-- Ручной импорт -->
                        <div id="import-tab-manual" class="import-tab-content">
                            <p class="muted" style="margin-bottom:16px">
                                Вставьте данные платежей в формате JSON. Каждый платеж должен содержать: orderId, amount, status, transactionId (опционально)
                            </p>
                            <textarea id="paymentImportInput" class="payment-import-textarea" placeholder='[{"orderId": "123456", "amount": 50000, "status": "completed", "transactionId": "TXN123"}, ...]'></textarea>
                            <div class="payment-import-example">
                                <strong>Пример формата:</strong><br>
                                [<br>
                                &nbsp;&nbsp;{"orderId": "123456", "amount": 50000, "status": "completed", "transactionId": "TXN123", "description": "Оплата заказа"},<br>
                                &nbsp;&nbsp;{"orderId": "123457", "amount": 75000, "status": "pending"}<br>
                                ]
                            </div>
                            <button id="paymentImportSubmit" class="btn btn-outline" style="margin-top:16px">Импортировать</button>
                            <div id="paymentImportResults" class="payment-import-results" style="display:none"></div>
                        </div>
                        
                        <!-- Импорт через API -->
                        <div id="import-tab-api" class="import-tab-content" style="display:none">
                            <p class="muted" style="margin-bottom:16px">
                                Импорт платежей через Kaspi API. Укажите период для загрузки платежей.
                            </p>
                            <div style="display:flex;flex-direction:column;gap:12px">
                                <div>
                                    <label style="display:block;margin-bottom:4px;font-size:13px;color:var(--ink-soft);font-weight:500">Дата начала</label>
                                    <input type="date" id="paymentImportDateFrom" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:8px">
                                </div>
                                <div>
                                    <label style="display:block;margin-bottom:4px;font-size:13px;color:var(--ink-soft);font-weight:500">Дата окончания</label>
                                    <input type="date" id="paymentImportDateTo" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:8px">
                                </div>
                                <button id="paymentImportApiSubmit" class="btn btn-outline">Загрузить через API</button>
                            </div>
                            <div id="paymentImportApiResults" class="payment-import-results" style="display:none;margin-top:16px"></div>
                        </div>
                        
                        <!-- Настройки -->
                        <div id="import-tab-config" class="import-tab-content" style="display:none">
                            <p class="muted" style="margin-bottom:16px">
                                Настройте параметры подключения к Kaspi API. Эти данные можно получить в личном кабинете Kaspi Pay.
                            </p>
                            <div style="display:flex;flex-direction:column;gap:12px">
                                <div>
                                    <label style="display:block;margin-bottom:4px;font-size:13px;color:var(--ink-soft);font-weight:500">API Key</label>
                                    <input type="text" id="kaspiApiKey" placeholder="Ваш API ключ от Kaspi" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:8px">
                                </div>
                                <div>
                                    <label style="display:block;margin-bottom:4px;font-size:13px;color:var(--ink-soft);font-weight:500">Merchant ID</label>
                                    <input type="text" id="kaspiMerchantId" placeholder="ID вашего магазина" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:8px">
                                </div>
                                <div>
                                    <label style="display:block;margin-bottom:4px;font-size:13px;color:var(--ink-soft);font-weight:500">Secret Key</label>
                                    <input type="password" id="kaspiSecretKey" placeholder="Секретный ключ для подписи" style="width:100%;padding:10px;border:1px solid var(--line);border-radius:8px">
                                </div>
                                <div style="display:flex;align-items:center;gap:8px">
                                    <input type="checkbox" id="kaspiDemoMode" checked>
                                    <label for="kaspiDemoMode" style="font-size:13px;color:var(--ink-soft)">Демо-режим (для тестирования без реального API)</label>
                                </div>
                                <button id="kaspiConfigSave" class="btn btn-outline">Сохранить настройки</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="kaspi-payment.js"></script>
    <script src="script.js"></script>